### HTTP 协议版本

------

##### 1：HTTP 0.9

​	只允许客户端发送GET这一种请求，且不支持请求头，由于没有协议头，造成了HTTP 0.9 协议只支持一种内容，即纯文本

##### 2：HTTP 1.0

​	第一个在通讯中指定版本号的HTTP协议版本，至今仍被广泛采用。相对于HTTP 0.9 增加了如下主要特性：

- 增加请求与响应头
- 响应对象以一个响应状态行开始：HTTP版本  状态码  状态信息
- 响应对象不只限于超文本，添加了图片等
- 支持GET、HEAD、POST方法发送请求
- 默认是短连接（支持长连接），缓存机制，以及身份认证机制 

##### 3：HTTP 1.1

​	在 HTTP1.0 中使用长连接需要添加请求头 Connection: Keep-Alive，而在HTTP 1.1 所有的连接**默认都是长连接**

关键性能优化：keepalive连接，chunked编码传输，字节范围请求

###### 分块传输编码（Chunked transfer encoding）

- 响应头部字段 transfer-coding : chunked，表示将用chunked编码传输内容
- 编码将实体分块传送并逐块标明长度,直到长度为0块表示传输结束

###### 字节范围请求

- 支持传送内容的一部分
- 例：当客户端已经有内容的一部分，为了节省带宽，可以只向服务器请求一部分。该功能通过在请求消息中引入了**range头域**来实现，它允许只请求资源的某个部分。在响应消息中**Content-Range头域声明了返回的这部分对象的偏移量和长度**。如果服务器相应地返回了对象所请求范围的内容，则响应码206

###### 新增请求方法

- HTTP1.1 增加了 OPTIONS,PUT, DELETE, TRACE, CONNECT方法


###### 缓存机制

​	HTTP/1.1在1.0的基础上加入了一些cache的新特性，引入了实体标签，一般被称为e-tags，新增更为强大Cache-Control头

##### 4：HTTP 2.0

###### 多路复用（二进制分帧）

​	HTTP 2.0 会将所有传输的信息分割为更小的消息和帧，并对它们采用二进制格式的编码 ，其中HTTP1.x的首部信息会被封装到**Headers帧**，而我们的request body则封装到**Data帧**里面

###### 随时复位

​	HTTP1.1 一个缺点是当HTTP信息有一定长度大小数据传输时，你不能方便地随时停止它，中断TCP连接的代价是昂贵的。使用HTTP 2.0 的 **RST_STREAM 将能方便停止一个信息传输**，启动新的信息，在不中断连接的情况下提高带宽利用效率

##### 5：长连接、短连接

- HTTP/1.0：默认使用无连接，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接
- HTTP/1.1：默认使用长连接，用以保持连接特性，使用长连接的HTTP协议，会在响应头加入头部字段
  - Connection : keep-alive
  - 在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。**Keep-Alive不会永久保持连接，它有一个保持时间**，可以在设定这个时间，实现长连接需要客户端和服务端都支持长连接，**timeout 是两次 HTTP 请求保持的时间(s)**
- HTTP协议的长连接和短连接，实质上是 **TCP协议的长连接和短连接**